
<style>
.artical-block .info-block .ad-title {
  color: #4a89dc;
  font-size: 18px;
}
.artical-block .ad-image {
  width: 22%;
  height: 160px;
  vertical-align: middle;
  display: table-cell;
  float: left;
  background-size:180px 160px;
  background-repeat: no-repeat;
}
.middleMaxnail a,
.middleMaxnail {
  overflow: hidden;  
  width: 100%;
  height: 160px;
  max-height: 160px;
  display: inline-block;
}
.middlenail {
  overflow: hidden;  
  width: 180px;
  height: 160px;
  max-width: 100%;
  max-height: 160px;
}
.artical-block .ad-image .thumbnail img,
.artical-block .ad-image .middlenail img,
.artical-block .ad-image .middleMaxnail img {
  max-width: none;
  max-height: none;
}

.breadcrumb {
  padding-left:  0;
}
.story-block {
  position: relative;
  display: block;
}
.panel-story {
  border: 1px solid #B5B4B4 !important;
}
.panel-story.panel-info > .panel-heading {
  background-color: #fff;
}
.panel-story.panel-info > .panel-heading > .panel-title {
  color: #777;
  display: block;
  border-bottom: 1px solid #B5B4B4;
  margin: 25px;
  margin-left: 16px;
  margin-right: 16px;
  padding: 0;
  padding-bottom: 10px;
  text-align: left;
  font-weight: normal;
  cursor:default;
}
.panel-story.panel-info > .panel-heading .post-time {
  position: absolute;
  color: #777;
  top: 0;
  right: 33px;
  cursor:default;
}

.image-block {
  display: inline-block;
  margin: 0 auto;
}
.story-caption {
  text-align: left;
}
.story-image {
  max-width: 100%;
}
.story-caption,
.image-block {
  padding: 10px;
}
.blog-block > img.banner {
  width:100%;  
}
.ad-item.static div.info-block .ad-title:hover {
  filter:alpa(opacity=100);   /* old IE */
  filter:progid:DXImageTransform.Microsoft.Alpha(Opacity=1,FinishOpacity=15, Style=3, StartX=0, FinishX=100, StartY=0,FinishY=16); /*supported by current IE*/
  -moz-opacity:1;          /* Moz + FF */
  opacity:1;    
}
.ad-item.static .ad-title {
  display:block;
  cursor: default;
  font-size: 16px;
}
.prC {
  padding-right: 0 !important;
}
.info-block > div {
  display:block;
}
.info-block > div > span {
  display:inline-block;
}

.blog-block .banner{
  width:100%;
}
.bk-ad-article .thumbnail {
  overflow: hidden;
  width: 115px;
  height: 90px;
}
.hot-news .info-block.col-xs-5 .img-thumbnail {  
  padding: 0;
  border: none;
  max-width: none;
  max-height: none;
}

.ad-item.hot-news {
  padding: 11px 5px;
  /*height: 150px;
  max-height: 150px;*/
  border: 1px solid #DDD;
  border-bottom: none;
}
.ad-item.hot-news a {
  font-size:15px;
}
.ad-item.hot-news .ad-title {
  max-height: 115px;
}
.ad-item.hot-news > .info-block {
}
.hot-news-icon {
  width: 18px;
  height: 18px;
  position: absolute;
  top: 17px;
  margin-left: -21px;
}
.border-bottom {
  border-bottom: 1px solid #DDD;
}
.mod-block .pic-block  {
  vertical-align: middle;
}
.mod-block a.picture > img {
  width: 100%;
}

.mod-block .info-block {
  vertical-align: top;
}
.mod-block .info-block > div {
  font-size: 16px;
}
.mod-block .info-block > div > .iLabel {
  font-weight: bold;
  font-size: 17px;
}

.author-section {
  position: absolute;
  bottom: -40px;
  left: 10px;
  padding-left: 35px;
}
.author-section * {
  display:inline-block;
}
.author-section > .author-name {
  font-weight: normal;
  color: #1a8559;
  font-size: 12px;
}
.author-section > .author-name.touch {
  color: #000;
}
.author-section > img {
  width: 42px;
  height: 42px;
  border-radius: 10px;
  position: absolute;
  margin-left: -45px;
}

.article-title {
  color: #0068ca;
}
.bk-ad-article {
  /*background-color: rgba(190, 139, 86, 0.15);*/
}
.list-artical,
.grid-artical {
  position: relative;
  display: inline-block;
  float: none;
  margin:0 auto;
}

.ml0 {
  margin-left: 0px;
}
.item-story {
  width: 290px;
  display: inline-block;
  float:none;
}
.artical-block > .row.table-layout {
  margin-bottom:10px;
  padding-bottom:10px;
  border-bottom: 1px solid #DDD;
  /*height: 170px;*/
}
.artical-block .info-block {
  width: 75%;
  vertical-align: top;
  float:left;
  margin-top: 15px;
  }
.social-tools {
  position: absolute;
  right: 0;
  bottom: -45px;
}
.readMore {
  display: block;
  text-align: right;
  color: #4a89dc;
}
.info-block {
  position: relative;
}
.readMore:hover {
  text-decoration: none;
}
.layou-tools {
  position: absolute;
  top: -50px;
  right: 16px;
}

.layou-tools .btn {
  border-color:#FFFFFF;
  border-top-width: 2px;
}
.layou-tools .btn.active {
  border-color:#FFFFFF;
  border-top-color: #000;
  color: #fff;
  background-color: #9540bf;
}
.story-desc * {
  margin: 0;
}
.ad-item div.info-block.col-xs-5 {
  width: 120px;
  height: 120px;
  vertical-align: middle;
}
.ad-item div.info-block.col-xs-3,
.ad-item div.info-block.col-xs-7 {
  vertical-align: middle;
}
.hot-news .info-block .article-title {
  height: 38px;
  line-height: 18px;
  padding: 2px 6px;
  font-size: 16px;
  overflow: hidden;
}
.hot-news .info-block .article-desc {
  /*height: 40px;*/
  line-height: 18px;
  font-size: 14px;
  padding: 2px 6px;
  overflow: hidden;
}

.hot-news .author-section {
  position: relative;
  bottom: 0;
  left: 0;
  padding-left: 0;
}
.row-1 .ad-title {
  font-weight: normal;
}

@media (max-width: 1400px) 
{
  .grid-artical {
    width: 100%;
    margin: 0 auto;
  }
}
@media (max-width: 1150px) 
{
  .story-desc {
	 font-size: 12px;
  }
  .layou-tools {
    position: absolute;
    top: -52px;
    right: 16px;
  }
  .author-section  {
    position: absolute;
    bottom: 30px;
    /*left: initial;*/
    right: 5px;
  }
  .social-tools {
    position: absolute;
    right: 0;
    bottom: 0;
  }
}
@media (max-width: 992px)
{
  .artical-block .info-block .ad-title {
    font-size: 15px;
    line-height: 18px;
    max-height: 38px;
    overflow: hidden;
    display: inline-block;
  }
  .row-1 .ad-image {
	width: 180px;
	height: 160px;
  }
  .row-1 .ad-image img.img-responsive {
	max-height: 160px;
  }
  .social-tools {
    position: absolute;
    right: 0;
    bottom: 0;
  }
  .ad-item div.info-block.col-xs-5 {
    display:none;
  }
  .ad-item div.info-block.col-xs-7 {
    width: 100%;
  }
}
@media (max-width: 500px)
{
  #my-slide,
  .story-desc {
	 display:none;
  }
  .row-1 .ad-image .middlenail,
.middlenail  {
  width: 300px;
  height: 150px;
  max-height: 150px;
}
  .artical-block .info-block .ad-title {
	font-size: 15px;
    text-align: left;
  }
  .artical-block .ad-image {
    width: 300px;
    height: auto;
    display: block;
    position: relative;
    margin: 0 auto;
  }
    .artical-block .ad-image img.img-responsive {
	  width: 280px;
	  max-height: 600px;
	  margin: 10px;
    }
  .artical-block .info-block {
	display: block;
	position: relative;
    text-align: center;
  }
  .artical-block .info-block:after,
  .artical-block .info-block:before,
  .artical-block .info-block *:after,
  .artical-block .info-block *:before  {
	clear: both;
  }
  .social-tools {
    position: relative;
    right: initial;
    bottom: initial;
	width: 280px;
    margin: 0 auto;
    margin-top: 15px;
  }
  .layou-tools {
	 display:none !important;
  }
  .grid-artical {
	 display:none !important;	  
  }
  .list-artical {
	 display:block !important;	  
  }
  .artical-block > .row.table-layout {
    position: relative;
	display: block;
    height: auto;
  }
  .author-section {
    position: relative;
    float: none !important;
    bottom: initial;
    left: initial;
    width: 280px;
    margin: 0 auto;
  }
}
.row {
    margin-right: 0px;
    margin-left: 0px;
}
.ad-item div.info-block.col-xs-3 {
  top: 15px;
  display: inline-block;
  padding: 10px;
  /*width: 40px;*/
}
.ad-item div.info-block.col-xs-3 .img-thumbnail {
  padding: 0;
}
@media screen and (min-width: 991px) and (max-width: 1439px){
	.artical-block .ad-image {
		width: 32%;
		height: 160px;
		vertical-align: middle;
		display: table-cell;
		float: left;
		background-size: 180px 160px;
		background-repeat: no-repeat;
	}
	.artical-block .info-block {
		width: 65%;
		vertical-align: top;
		float: left;
		margin-top: 15px;
	}
	.artical-block > .row.table-layout {
		margin-bottom: 10px;
		padding-bottom: 10px;
		border-bottom: 1px solid #DDD;
		height: 215px;
	}
	.author-section {
		position: absolute;
		bottom: -30px;
		left: 10px;
		padding-left: 143px;
	}
.social-tools {
		position: absolute;
		right: 18px;
		bottom: -65px;
	}
	.ad-item.hot-news .ad-title {
		max-height: none;
	}
	.bk-ad-article .thumbnail {
		overflow: hidden;
		width: 95px;
		height: auto;
	}
	.ad-item div.info-block.col-xs-5 {
		width: 50%;
		height: 120px;
		vertical-align: middle;
	}
	.bk-ad-article .thumbnail {
		overflow: hidden;
		width: 85px;
		height: 90px;
	}
	.col-xs-7 {
		width: 50%;
	}
	.hot-news .info-block .article-desc {
		/* height: 40px; */
		line-height: 18px;
		font-size: 14px;
		padding: 0px 0px;
		overflow: hidden;
	}
	.hot-news .info-block .article-title {
		height: 40px;
		line-height: 18px;
		padding: 3px 2px;
		font-size: 16px;
		overflow: hidden;
	}
}
@media screen and (min-width: 768px) and (max-width: 991px){
	.ad-item div.info-block {
		padding: 8px 2px;
		vertical-align: top;
		text-align: left;
	}
	.row-1 .ad-image {
		width: 42%;
		height: 160px;
	}
	.artical-block .info-block {
		width: 56%;
		vertical-align: top;
		float: left;
		margin-top: 15px;
    margin-bottom: 35px;
	}
	.artical-block .ad-image {
    width: 44%;
    height: 160px;
    vertical-align: middle;
    display: table-cell;
    float: left;
    background-size: 180px 160px;
    background-repeat: no-repeat;
}
.social-tools {
    position: absolute;
    right: -12px;
    bottom: -45px;
}
.author-section {
    position: absolute;
    bottom: -35px;
    /* left: initial; */
    right: -23px;
    margin-left: 30px;
}
.social-tools {
    position: absolute;
    right: -12px;
    bottom: -66px;
}
.artical-block > .row.table-layout {
    margin-bottom: 10px;
    padding-bottom: 35px;
    border-bottom: 1px solid #DDD;
    /* height: 170px; */
}
}
@media screen and (min-width: 500px) and (max-width: 767px){
	.row-1 .ad-image {
    width: 32%;
    height: auto;
}
.artical-block .info-block {
    width: 68%;
    vertical-align: top;
    float: left;
    margin-top: 15px;
    margin-bottom: 60px;
}
.artical-block .ad-image {
    width: 32%;
    height: 160px;
    vertical-align: middle;
    display: table-cell;
    float: left;
    background-size: 180px 160px;
    background-repeat: no-repeat;
}
.author-section {
    position: absolute;
    bottom: -30px;
    /* left: initial; */
    /*left: 152px;*/
}
.social-tools {
    position: absolute;
    right: 0;
    bottom: -65px;
}
}
</style>
			<div style="position:relative;">
				<div class="layou-tools">
				<?php
					$isGrid = $layout == "grid" ? "active" : "";
					$isList = $layout == "list" ? "active" : "";
				?>
					<a class="btn btn-default <?php echo $isGrid;?>" onclick="changeLayout('grid',this);"><span class="fa fa-th"></span></a>
					<a class="btn btn-default <?php echo $isList;?>" onclick="changeLayout('list',this);"><span class="fa fa-navicon"></span></a>
				</div>
			</div>
				<div class="text-center">
			<div class="artical-block grid-artical">
				<?php 
				$ind = 1;
				foreach( $listStory AS $story ) { ?> 
				<div class="item-story item-story-<?php echo $ind;?> ml0">
					<div class="middleMaxnail">
						<a href="/blog/detail/<?php echo $story["id"];?>"><img src="<?php echo $story["blog-extra"]["url"];?>" class="responsive"/></a>
					</div>
					<div class="caption">
						<H3 class="story-title"><?php echo $story["blog-title"];?></H3>
					</div>
				</div>
				<?php } ?>
			</div>
				</div>
			<div class="artical-block list-artical">
				<?php 
				$ind = 1;
				foreach( $listStory AS $story ) { ?> 
				<div class="row table-layout row-<?php echo $ind;?>">
					<div class="ad-image">
						<div class="middlenail">
							<a href="/blog/detail/<?php echo $story["id"];?>" style="display:inline-block;" >
								<img src="<?php echo $story["blog-extra"]["url"];?>" class="img-responsive responsive"/>
							</a>
						</div>
					</div>
					<div class="info-block p15">
						<a class="ad-title" href="/blog/detail/<?php echo $story["id"];?>"><?php echo $story["blog-title"];?></a>
						<?php $arrDesc = explode("\n",$story["blog-content"]);?>
						<?php if( $ind != 1 ) { ?>
						<span class="story-desc"><?php echo strip_tags($arrDesc[0]);?><a href="/blog/detail/<?php echo $story["id"];?>" class="readMore"><?php echo $objLang["bloger"]["readMore"];?></a></span>
						<?php } else { ?>						
						<span class="story-desc">
							<?php for( $i=0;$i<4;$i++ ) { echo array_key_exists($i,$arrDesc)?strip_tags($arrDesc[$i]): ""; } ?>						
						<a href="/blog/detail/<?php echo $story["id"];?>" class="readMore"><?php echo $objLang["bloger"]["readMore"];?></a></span>						
						<?php } ?>
						<div class="pull-left author-section">	
							<img src="<?php echo $story["bloger"]["picture"]["url"];?>" class="img-rounded" />
							<div class="author-name"><?php echo $story["bloger"]["name"];?></div>
							<div class="author-name">｜</div>
							<div class="author-name"><?php echo $objLang["bloger"]["message"].$story["msgCount"];?></div>
							<div class="author-name">｜</div>
							<div class="author-name touch"><?php echo $objLang["bloger"]["touch"].$story["touch"];?></div>
							<br />
							<div class="panel-time"><?php echo $objLang["bloger"]["postby"];?><?php echo $story["raw-date"];?></div>
						</div>
						<div class="social-tools">	
							<div class="fb-like" style="width: 263px; z-index: <?php echo 1000 - $ind; ?>"data-href="/blog/detail/<?php echo $story["id"];?>" data-layout="standard" data-action="like" data-show-faces="true" data-share="true"></div
							>
						</div>
					</div>
				</div>
				<?php 
					$ind++;
				} ?>
			</div>
			<div class="pagination-block text-center">
				<nav>
				  <ul class="pagination">
					<?php if( $showPrev === true ){ ?>
					<li class="Prev"><a onclick="prevPage();"><?php echo $objLang["bloger"]["prevPage"];?></a></li>
					<?php } ?>
					<?php for( $i = 1; $i <= $totalPage; $i++ ) { $isActive = ($i==$page)?"class=\"active\"":""; ?>
					<li <?php echo $isActive;?>><a onclick="gotoPage(<?php echo $i;?>);"><?php echo $i;?></a></li>
					<?php } ?>
					<?php if( $showNext === true ){ ?>
					<li class="Next"><a onclick="nextPage();"><?php echo $objLang["bloger"]["nextPage"];?></a></li>
					<?php } ?>
				  </ul>
				</nav>
			</div>
<script>
var page = <?php echo $page;?>;
var totalPage = <?php echo $totalPage;?>;
var layout = '<?php echo $layout;?>';

function gotoPage(p)
{
	location.href = window.location.pathname + "?" + $.param({'p':p,'lyt':layout});
}
function prevPage()
{
	location.href = window.location.pathname + "?" + $.param({'p':page-1,'lyt':layout});
}
function nextPage()
{
	location.href = window.location.pathname + "?" + $.param({'p':page+1,'lyt':layout});
}
function changeLayout(l,self)
{
	$(".layou-tools .btn").removeClass("active");
	$(self).addClass("active");
	$(".artical-block").fadeOut(500);
	$("."+l+"-artical").fadeIn(500);
	layout = l;
	init_thumbnail();
}

$(function(){
	$(".artical-block").hide();
	$("."+layout+"-artical").show();
	
});
$(function(){init_thumbnail});
$( window ).load(init_thumbnail);
$( window ).resize(init_thumbnail);
function init_thumbnail() 
{
	$(".thumbnail, .middlenail, .middleMaxnail").each(function(){
		
		var hasMargin = true;//$(this).hasClass("middlenail") ? false : true;
		
		var w = $(this).outerWidth();
		var h = $(this).outerHeight();
		
		var img = $(this).find("img").eq(0);
		var imgW = img[0].naturalWidth;
		var imgH = img[0].naturalHeight;
		var imgRate = imgW / imgH;
		
		$(this).css({"overflow":"hidden"});
		var frameRate = w/h;
		var imageRate = imgW/imgH;
		
		var gridLayout = false;//$(this).parent().parent().hasClass("grid-artical");
		if( gridLayout === false )		
		{
			if( frameRate > imageRate ) 
			{
				var newImgH = imgH * ( w / imgW );
				var marginTop = ( parseInt(newImgH) - parseInt(h) ) / 2;
				var param = ( hasMargin ) ? {"width":w+"px","height":newImgH+"px","margin-top":"-"+marginTop+"px"} : {"width":w+"px","height":newImgH+"px"};
				$(this).find("img").css(param);
			}
			else
			{
				var newImgW = imgW * ( h / imgH );
				var marginLeft = ( parseInt(newImgW) - parseInt(w) ) / 2;
				var param = ( hasMargin ) ? {"width":newImgW+"px","height":h+"px","margin-left":"-"+marginLeft+"px"} : {"width":newImgW+"px","height":h+"px"};
				$(this).find("img").css(param);
			}				
		}
	});
	
	$(".ad-item .col-xs-4");
}
</script>
		